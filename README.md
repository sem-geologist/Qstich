# Qstitch

This software are designed to easy up stitching of the tiled/mosaiced SEM images/ spectral images.
At this moment sofware works just with data saved by Bruker Esprit 1.9.

# Introduction

Stitching of the tiled images can be problematic due to different kinds of abberations. Some of the SEM have very good measures for the problem, but some (due to bad enginering) do correction in the cost of the borders.
While most of preinstalled SEM/EDS software have functionality of stitching images, it works often poorly, are undocumented, have very or no options, resulting in poor final outcome.

# Functionality of Qstitch
The main purpoise of this program is to stich the images in batch with tweeks done in GUI. Additionaly this program have option to filter the often noisy spectral images with few most apropriate filters (uses opencv3 library: blur, gaussian, median, bilateral filters), what is missing in most of the preinstalled SEM software.

Diferently than many kind of foto/panorama builder programs the stitching of SEM images are done explicily in 2D plane. Often the mosaicing SEM functionality allows to take images at constant x,y steps. In this program the tweeking of the stitcing parameters (step size, x and y resolutions, rotation, border cutoffs) are done using 3x3 tiles of adjecent BSE (or other) images with built GUI. It is possible to "upload" many samples, tweek them and then leave the program for stitching whole stack.

Program were intended to have very low memory footprint. Differently than some of the comercial (some even 32bit delphi based :o) preinstalled SEM software, Qstitch will not fetch whole dataset into memory. Instead it does stitching piece by piece and due to that is able to stitch much larger images. At this moment the amount of max used memory is 16bit * raster size (numpy). With planed hdf5 support the mentioned silly memory limitations can be completely forgoten.

# input

At this moment program reads just Bruker Esprit software saved files:
     for "BSE only" tiling can be done from png,tif,jpg grayscale.
     for elemental mappings the input should be txt files (as the only format saving counts, not the interpretation), not the colourful images!!!
     txt format is 16bit counts for chosen energy interval.
Note:
     txt files generated by Esprit have no resolved interferences, this is very important limitation.
     
# output

The program saves stiched images into tiff and png only (no jpg or other lossy formats). Don't dare to ask the jpg support. If You are doing high resolution science -- please,please,please buy a larger capacity disk! Do not waste time of SEM and SEM operators time with your crappy jpgs. 

Additionaly to the output images, program outputs world files useful in opening images in GIS, allowing to scale up properly in GIS programs such as Qgis (tested). The world files contains the resolution information, and will work in any metric coordinate system.

The hdf5 output implementation are planed.

# dependencies:
     *the program are intended to be used with python3 (due to cleaner utf-8 support)
     *pyqt4
     *pyqtgraph
     *numpy
     *scipy (for png handling)
     *opencv3 (just opencv3 works with python3)
     *tifffile (by Christoph Gohlke)
     *lxml
